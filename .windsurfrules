# âš›ï¸ **Windsurf Front-End Rules**

## ğŸ§  **Contexto e AnÃ¡lise Inicial**

1. **AnÃ¡lise de Projeto:**
   Antes de gerar qualquer cÃ³digo, a IA deve **analisar toda a estrutura do projeto** (pastas, dependÃªncias, scripts, build system, componentes reutilizÃ¡veis e padrÃ£o de design system).

2. **Stack PadrÃ£o:**

   * O projeto front-end utiliza **React (ou Next.js)** com **TypeScript**.
   * Usa **TailwindCSS** e **Shadcn/UI** como base de estilizaÃ§Ã£o.
   * Utiliza **Axios** para consumo de API e **React Query** ou **SWR** para gerenciamento de cache.
   * A IA deve assumir esse stack como padrÃ£o, salvo instruÃ§Ã£o contrÃ¡ria.

3. **Objetivo Principal:**
   Garantir **performance**, **seguranÃ§a**, **manutenibilidade** e **coerÃªncia visual e estrutural** entre todas as pÃ¡ginas e componentes.

---

## âš™ï¸ **Ambiente de Desenvolvimento**

4. **Porta PadrÃ£o:**

   * Sempre iniciar o projeto localmente em **localhost:8080**.
   * Se a porta estiver ocupada, tentar liberÃ¡-la antes de iniciar o servidor:

     ```powershell
     Get-Process -Id (Get-NetTCPConnection -LocalPort 8080).OwningProcess | Stop-Process -Force
     ```

5. **Scripts de ExecuÃ§Ã£o:**

   * Scripts obrigatÃ³rios no `package.json`:

     * `dev` â†’ inicia o servidor local
     * `build` â†’ compila o projeto para produÃ§Ã£o
     * `start` â†’ inicia o build de produÃ§Ã£o
     * `lint` â†’ executa lint
     * `test` â†’ roda testes unitÃ¡rios
   * A IA **nunca deve criar scripts duplicados** ou conflitantes.

6. **Build e Commits:**

   * Antes de qualquer commit, sempre rodar `npm run build` e garantir **zero erros**.
   * NÃ£o deve fazer commits automÃ¡ticos apÃ³s alteraÃ§Ãµes â€” apenas quando o usuÃ¡rio solicitar.
   * Mensagens de commit devem estar em **inglÃªs tÃ©cnico**, ex:

     ```
     feat: add responsive navbar with dropdown
     fix: correct rendering issue on product grid
     refactor: improve performance of checkout page
     ```

---

## ğŸ§± **Arquitetura e Boas PrÃ¡ticas**

7. **PrincÃ­pios SOLID (adaptado ao front):**

   * **S**ingle Responsibility â†’ Cada componente deve ter apenas uma responsabilidade.
   * **O**pen/Closed â†’ Componentes devem ser extensÃ­veis via props, nÃ£o modificaÃ§Ãµes diretas.
   * **L**iskov Substitution â†’ Componentes filhos devem se comportar como o pai espera.
   * **I**nterface Segregation â†’ NÃ£o forÃ§ar props desnecessÃ¡rias em componentes genÃ©ricos.
   * **D**ependency Inversion â†’ Usar hooks e contextos para injetar dependÃªncias, nÃ£o importaÃ§Ãµes diretas.

8. **PadrÃ£o de Pastas:**

   ```
   src/
   â”œâ”€â”€ components/       â†’ Componentes reutilizÃ¡veis (UI, Form, Layout)
   â”œâ”€â”€ pages/            â†’ PÃ¡ginas do app
   â”œâ”€â”€ hooks/            â†’ Hooks customizados
   â”œâ”€â”€ context/          â†’ Contextos globais (ex: Auth, Theme)
   â”œâ”€â”€ services/         â†’ Consumo de APIs (Axios)
   â”œâ”€â”€ utils/            â†’ FunÃ§Ãµes auxiliares
   â”œâ”€â”€ types/            â†’ Tipos TypeScript globais
   â”œâ”€â”€ assets/           â†’ Imagens, Ã­cones e fontes
   â””â”€â”€ styles/           â†’ Arquivos Tailwind, CSS globais
   ```

9. **ReutilizaÃ§Ã£o:**

   * Nunca duplicar componentes ou lÃ³gica â€” sempre reutilizar.
   * Centralizar hooks e contextos globais.
   * Se detectar duplicidade, a IA deve propor refatoraÃ§Ã£o imediata.

10. **Design System e UI:**

    * Utilizar exclusivamente **componentes do Design System** definido (Shadcn/UI).
    * Seguir paleta de cores e tokens definidos no Tailwind (`theme.extend`).
    * Jamais sobrescrever estilos diretamente com `!important` â€” use classes utilitÃ¡rias.

---

## ğŸ’¾ **ComunicaÃ§Ã£o com o Back-End**

11. **APIs e ServiÃ§os:**

    * Todas as chamadas HTTP devem ser centralizadas em `services/`.
    * Usar **Axios Instance** configurada com interceptors de erro e token.
    * Nunca chamar endpoints diretamente de componentes.

12. **AutenticaÃ§Ã£o:**

    * Armazenar tokens apenas em `HttpOnly Cookies` ou `Secure Storage`.
    * Nunca usar `localStorage` para tokens sensÃ­veis.
    * Implementar logout automÃ¡tico se o token expirar (401).

13. **Tratamento de Erros:**

    * Nenhum erro deve ser silencioso â€” sempre exibir mensagem de erro amigÃ¡vel.
    * Logar erros crÃ­ticos via **monitoramento externo** (Sentry, LogRocket, etc).

14. **DocumentaÃ§Ã£o Swagger:**

    * Se o backend mudar endpoints, a IA deve verificar se o front estÃ¡ usando a nova versÃ£o.
    * Atualizar os serviÃ§os correspondentes com as novas rotas e parÃ¢metros.

---

## ğŸ§© **CÃ³digo, Testes e Qualidade**

15. **Lint e FormataÃ§Ã£o:**

    * O cÃ³digo deve estar 100% limpo pelo **ESLint** e formatado com **Prettier**.
    * Regras de lint devem ser respeitadas, especialmente de acessibilidade (JSX a11y).

16. **Testes:**

    * Cada componente deve ter **testes unitÃ¡rios** (React Testing Library).
    * FunÃ§Ãµes crÃ­ticas (ex: carrinho, checkout, login) precisam de **testes de integraÃ§Ã£o**.
    * Cobertura mÃ­nima: **80%**.

17. **Performance e RenderizaÃ§Ã£o:**

    * Sempre usar **React.memo** para componentes pesados.
    * Evitar re-renderizaÃ§Ãµes desnecessÃ¡rias com **useCallback** e **useMemo**.
    * Lazy-load para rotas e imagens.
    * Prefira **Suspense** e **dynamic imports** quando possÃ­vel.

18. **Controle de Estado:**

    * Usar **Context API**, **Zustand** ou **Redux Toolkit**.
    * Evitar mÃºltiplas fontes de verdade â€” manter um estado global centralizado.

19. **Responsividade e Acessibilidade:**

    * Cada componente deve ser **totalmente responsivo** (mobile-first).
    * Seguir normas **WCAG**: contraste, foco visÃ­vel e leitura por screen readers.
    * Usar labels adequadas e `aria-` tags sempre que necessÃ¡rio.

---

## ğŸ” **SeguranÃ§a no Front-end**

20. **ProteÃ§Ã£o de Dados:**

    * Nunca exibir dados sensÃ­veis no DOM ou console.
    * Remover logs antes de builds de produÃ§Ã£o.
    * Evitar injeÃ§Ãµes com `dangerouslySetInnerHTML`.

21. **CORS e HTTPS:**

    * A comunicaÃ§Ã£o com o backend deve ser sempre feita via **HTTPS**.
    * Nunca aceitar requisiÃ§Ãµes para origens nÃ£o confiÃ¡veis.

22. **ProteÃ§Ã£o contra ataques:**

    * Implementar CSRF protection se necessÃ¡rio.
    * Sanitizar qualquer dado renderizado dinamicamente.

---

## ğŸ“¦ **Build e Deploy**

23. **Builds:**

    * Sempre otimizar o bundle final (`npm run build` deve gerar < 5MB de assets totais).
    * Usar **Code Splitting**, **Tree Shaking** e **imagem otimizada** (`next/image` ou `vite-plugin-image-optimizer`).
    * Remover cÃ³digo morto e dependÃªncias nÃ£o usadas.

24. **Env Files:**

    * VariÃ¡veis devem vir de `.env` com prefixo `NEXT_PUBLIC_` (ou equivalente).
    * Nunca incluir segredos de backend no front.

25. **Cache e Offline:**

    * Configurar cache inteligente via **Service Worker** (PWA) se aplicÃ¡vel.
    * Atualizar cache apÃ³s cada deploy.

---

## ğŸ” **DocumentaÃ§Ã£o e Manutenibilidade**

26. **DocumentaÃ§Ã£o:**

    * Todo componente complexo deve ter JSDoc.
    * Atualizar o README com instruÃ§Ãµes de setup e build.
    * Adicionar comentÃ¡rios explicando hooks customizados complexos.

27. **Naming Conventions:**

    * Componentes: `PascalCase`
    * Hooks: `useCamelCase`
    * VariÃ¡veis e funÃ§Ãµes: `camelCase`
    * Constantes globais: `UPPER_SNAKE_CASE`

28. **OrganizaÃ§Ã£o:**

    * Cada pÃ¡gina deve importar componentes apenas do design system ou do diretÃ³rio `components`.
    * Nunca importar arquivos diretos entre features (usar abstraÃ§Ã£o).

---

## ğŸš« **Comportamentos Proibidos**

29. âŒ Nunca:

* Usar `console.log` em produÃ§Ã£o.
* Usar `any` no TypeScript.
* Fazer manipulaÃ§Ã£o direta do DOM (`document.querySelector`).
* Duplicar componentes.
* Importar CSS global dentro de componentes.
* Usar hooks dentro de condicionais.
* Usar inline styles (exceto em casos muito especÃ­ficos).

30. âœ… Sempre:

* Reutilizar componentes.
* Seguir o Design System.
* Validar performance antes do commit.
* Garantir acessibilidade.
* Respeitar padrÃµes de versionamento e lint.

---

## ğŸ§° **AutomaÃ§Ã£o e Deploy**

31. **CI/CD:**

* Pipeline deve conter: `lint`, `test`, `build`, `analyze`.
* Nunca sugerir merge se houver erro de lint/test.

32. **Hot Reload e Cache:**

* Sempre ativar hot reload (`react-refresh` / `vite`).
* Limpar cache quando houver alteraÃ§Ã£o de envs ou assets crÃ­ticos.

33. **Monitoramento:**

* Implementar integraÃ§Ã£o com ferramentas de anÃ¡lise (Sentry, LogRocket, Vercel Analytics).
* Monitorar erros de runtime e reportar via logging estruturado.